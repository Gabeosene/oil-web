---
/* oilpage.astro */

import "../styles/terminal.css";

const logo = String.raw`
  _____          _______            ____
 / ____ \        |_____|            |  |
 | |  | |         |   |             |  |
 | |  | |         |   |             |  |
 | |__| |         |___|             |  |___
 \______/ [OBUDA]|_____|[INNOVATION]|______|[LAB]
`;

const bootLog = [
  {
    time: "00:00:00.031",
    iso: "PT0.031S",
    message: "BOOT SEQUENCE  OIL SYSTEM BIOS v4.2",
  },
  {
    time: "00:00:00.214",
    iso: "PT0.214S",
    message: "MEMORY BANKS CALIBRATED",
  },
  {
    time: "00:00:00.402",
    iso: "PT0.402S",
    message: "SENSOR GRID ONLINE",
  },
  {
    time: "00:00:00.655",
    iso: "PT0.655S",
    message: "NEURAL ROUTINES STABLE",
  },
  {
    time: "00:00:00.883",
    iso: "PT0.883S",
    message: "FIELD OPERATIONS SYNCED",
  },
  {
    time: "00:00:01.127",
    iso: "PT1.127S",
    message: "INIT HANDSHAKE OPERATOR LINK ESTABLISHED",
  },
  {
    time: "00:00:01.512",
    iso: "PT1.512S",
    message: "DIAGNOSTIC SUMMARY: ALL SYSTEMS NOMINAL",
  },
];

const newsFeed = [
  {
    iso: "2025-09-18",
    stamp: "9 SEPTEMBER 2025",
    title: "Website is Live!",
    summary:
      "After a lot of fighting with our internal systems, our website is finally online. Please enjoy :)",
    status: "OIL Internal",
  },
  //{
  //  iso: "2025-09-16",
  //  stamp: "28 2024",
  //  title: "Thermal analytics firmware pushed",
  //  summary:
   //   "Latest firmware bundle tightens predictive thresholds on heat exchangers, cutting false alarms by 18% in test simulations.",
   // status: "Firmware",
  //},
 // {
  //  iso: "2024-04-10",
  //  stamp: "10 APR 2024",
  //  title: "Lab clean room expansion commissioned",
  //  summary:
  //    "Clean room wing now operational with dual-spectrum diagnostics benches to accelerate composite fluid research cycles.",
  //  status: "Infrastructure",
  //},
];
---

<main>
  <div class="system-clock" aria-live="polite">
    <div class="system-clock__row">
      <span class="clock-label">Local</span>
      <time id="clock-local" aria-label="Local time">--:--:--</time>
    </div>
    <div class="system-clock__row">
      <span class="clock-label">Budapest</span>
      <time id="clock-budapest" aria-label="Budapest time">--:--:--</time>
    </div>
  </div>
  <header>
    <h1 class="sr-only">Obuda Innovation Laboratory</h1>
    <pre aria-hidden="true">{logo}</pre>
  </header>

  <section class="info-panels" aria-label="Site information panels">
    <details>
      <summary>About</summary>
      <p>
        Obuda Innovation Laboratory (O.I.L.) is Obuda University's premier destination for both International and Domestic students. We are the first and only English-First collective within the university and pride ourselves on our cooperation. We are open to students, professors and community members of all technical backgrounds.
      <p>
        Founded in 2024 OIL is in the heart of Budapest, and strives to become the city's premier makerspace and research hub, innovating across all sectors. Across Big Data, AI, Robotics, Business, IOT, Design, Art and more, our team of students are ready to take on any challenge you or your business faces. Contact us with your project ideas today!
      </p>
    </details>
    <details>
      <summary>How we work</summary>
    <h3>Your Time, Your Projects</h3>
      <p>
        At OIL, you've got freedom. Got a class project? Bring it. Need a quiet corner to study? Done. Want to tinker with a 3D printer? Go for it. Whether it's a weird prototype, a custom part, or a full start-up idea, the space is yours.
      </p>
    <h3>The Deal</h3>
      <p>
        We give you the gear, the space, and the protection for your ideas. In return, we ask you to kick in <b>30-40% of your time</b> for Lab Projects.
      <br>
        These are the big missions: cracking industrial problems, building weird machines, training AI models, or converting an old car to electric. Projects that gets OIL noticed, brings in funding, and lets us keep reaching for bigger and better things.
      </p>
    <h3>No Skills? No Problem!</h3>
    <p>
      Never touched a soldering iron? Never written a line of code? Perfect! OIL is a sandbox for trial and error. Fail forward, fail fast, fail better. Here, you'll get handed a tool, a quick crash course, and a new problem to solve right after.
    </p>
    </details>
    <details>
      <summary>Location</summary>
      <ul>
        <li>Headquarters: Obudai Egyetem - Banki Donat Faculty, Blaha Lujza Ter, Budapest, Hungary</li>
      </ul>
    </details>
    <details>
      <summary>Contact</summary>
      <ul>
        <li>Main Email: oil@oil-obuda.hu</li>
        <li>Head of Operation's Email: gabrielcreamer@oil-obuda.hu</li>
        <li>Head of Equipment's Email: gorjan@oil-obuda.hu</li>
        <li>Head of Finance's Email: dragoslav@oil-obuda.hu</li>
      </ul>
    </details>
    <details class="site-footer">
      <summary>Join Us</summary>
      <ul>
        <li>Please follow the link to a Google Form to join OIL today!</li>
        <button onclick="window.location.href='https://docs.google.com/forms/d/e/1FAIpQLSdx4pLc4U_tc6f43EmEr5PYv8chOBxufopI2WGBb9e36x5uYw/viewform?usp=sharing&ouid=106583092023257242650'">Join OIL</button>
      </ul>
    </details>
  </section>


  <section class="news-feed" aria-labelledby="news-feed-heading">
    <div class="news-feed__header">
      <h2 id="news-feed-heading">oil news feed</h2>
      <p>Updates direct from OIL</p>
    </div>
    <ol class="news-feed__list">
      {newsFeed.map((item) => (
        <li>
          <article>
            <header>
              <span class="news-feed__badge">{item.status}</span>
              <time dateTime={item.iso}>{item.stamp}</time>
            </header>
            <h3>{item.title}</h3>
            <p>{item.summary}</p>
          </article>
        </li>
      ))}
    </ol>
  </section>

  <section aria-labelledby="boot-log-heading">
    <h2 id="boot-log-heading" class="sr-only">Boot log entries</h2>
    <ol class="boot-log">
      {bootLog.map((entry) => (
        <li>
          <time dateTime={entry.iso}>{entry.time}</time>
          <span>{entry.message}</span>
        </li>
      ))}
    </ol>
  </section>

  <footer class="site-footer" aria-labelledby="footer-heading">
    <h2 id="footer-heading" class="sr-only">Codex lab footer navigation</h2>
    <div class="site-footer__status">
      <span class="status-label">STATUS</span>
      <span class="status-value">ONLINE AWAITING COMMAND</span>
    </div>
    <div class="site-footer__grid">
      <section aria-label="Follow us">
        <h3>Follow us</h3>
        <ul>
          <li><a href="https://www.linkedin.com/company/obuda-innovation-laboratory/" target="_blank" rel="noreferrer">LinkedIn</a></li>
          <li><a href="https://www.instagram.com/oil_banki/?hl=en" target="_blank" rel="noreferrer">Instagram</a></li>
          <li><a href="https://www.youtube.com" target="_blank" rel="noreferrer">YouTube</a></li>
        </ul>
      </section>
      <section aria-label="Join our newsletter">
        <h3>Join our newsletter</h3>
        <p>Receive lab bulletins, project calls, and event invitations straight to your inbox.</p>
        <form>
          <label class="sr-only" for="newsletter-email">Email address</label>
          <input
            id="newsletter-email"
            type="email"
            name="email"
            placeholder="oil@oil-obuda.hu"
            required
          />
          <button type="submit">Subscribe</button>
        </form>
      </section>
      <section aria-label="Lab address">
        <h3>Lab address</h3>
        <address>
          Obuda Innovation Laboratory (O.I.L.)<br />
          Csokonai utca 6 <br />
          H-1081 Budapest<br />
          Hungary
        </address>
        <div class="glitch" data-text="AUTHORIZED CHAOS ONLY">
  AUTHORIZED CHAOS ONLY
</div>
      </section>
    </div>
  </footer>
  <footer style="text-align:center; font-size:12px; color:#666; margin-top:20px; padding:10px;">
  OIL 2025: All rights reserved
</footer>
</main>

<script>
  if (typeof window !== "undefined") {
    const localClock = document.getElementById("clock-local");
    const budapestClock = document.getElementById("clock-budapest");

    const localFormatter = new Intl.DateTimeFormat(undefined, {
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
    });

    const budapestFormatter = new Intl.DateTimeFormat(undefined, {
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      timeZone: "Europe/Budapest",
    });

    const localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone ?? "UTC";

    const buildIsoFormatter = (timeZone) =>
      new Intl.DateTimeFormat("sv-SE", {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        timeZone,
        timeZoneName: "shortOffset",
      });

    const localIsoFormatter = buildIsoFormatter(localTimeZone);
    const budapestIsoFormatter = buildIsoFormatter("Europe/Budapest");

    const isoWithOffset = (formatter, date) => {
      const parts = Object.fromEntries(
        formatter
          .formatToParts(date)
          .filter((part) => part.type !== "literal")
          .map((part) => [part.type, part.value])
      );

      const offsetMatch = parts.timeZoneName?.match(/GMT([+-])(\d{1,2})(?::(\d{2}))?/);
      const offset = offsetMatch
        ? `${offsetMatch[1]}${offsetMatch[2].padStart(2, "0")}:${(offsetMatch[3] ?? "00").padStart(2, "0")}`
        : "Z";

      return `${parts.year}-${parts.month}-${parts.day}T${parts.hour}:${parts.minute}:${parts.second}${offset}`;
    };

    const updateClock = () => {
      const now = new Date();

      if (localClock) {
        localClock.textContent = localFormatter.format(now);
        localClock.dateTime = isoWithOffset(localIsoFormatter, now);
      }

      if (budapestClock) {
        budapestClock.textContent = budapestFormatter.format(now);
        budapestClock.dateTime = isoWithOffset(budapestIsoFormatter, now);
      }
    };

    updateClock();
    window.setInterval(updateClock, 1000);
  }
</script>
